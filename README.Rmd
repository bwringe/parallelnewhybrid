# parallelnewhybrid 


### ***parallelnewhybrid*** is an R package designed to parallelize *NewHybrids* analyses


***  

###Package Installation
**parallelenewhybrid** can be installed from GitHub using the R package *devtools* and the function *install_github*:  
```
devtools::install_github("bwringe/parallelnewhybrid")
```
<span style = "color:red"> <strong>NOTE:</strong></span> : **parallelnewhybrid** relies on functions from the R packages *parallel*, *plyr*, *stringr*, and *tidyr*. The user should ensure these are installed from CRAN prior to installing **parallelnh**.  

***  

###Function descriptions
<h4 class="text-primary">parallelnh_xx.R</h4>
Allows *NewHybrids* (Anderson and Thompson 2002) to be run in parallel. A job (*NewHybrids* analysis) is assigned to each of the *c* cores available in the computer. As each task finishes, a new analysis is asigned to the idled core.  
All *NewHybrids* format files in the folder the user specifies as *folder.data* will be analyzed.  
The user can also specify the length of the MCMC burnin using the *burnin* and *sweeps* parameters.  
<span style = "color:red"> <strong>NOTE:</strong></span> : There are **three operating system-specific versions** of the **parallelnh_xx** function because of the different ways in which the operating systems handle forking of processes.  

**parallelnh version**|**Operating system**
------------|----------
**parallelnh_OSX** | OS X
**parallelnh_WIN** | Windows
**parallelnh_LINUX** | Linux (Ubuntu)

***  

###How to use:  
####Example datasets:  
Example datasets have been provided as R images (.rda files). These can be loaded into your workspace using the ``data()`` function  

**Example dataset** | **Contents**  
------------|---------------------------------------------------------------  
*SimPops\_S1R1_NH* | A *NewHybrids* format file. To analyze this file using the function **parallelnh_xx**, save it with the extension ".txt" to an empty folder on your hard drive, then provide **parallelnh_xx** with the file path to the folder. To run in parallel, after saving the file, copy it and give the copies unique names. **parallelnh_xx** will attempt to analyze all files which do not contain "individual.txt" within the file name, so it is essential that only NewHybrids formatted files, and their associated individual files be present in the folder provided to **parallelnh_xx**.
*SimPops\_S1R1_NH_individuals* | The individual file associated with *SimPops\_S1R1_NH*. A single copy of this file should be saved to the same folder in which *SimPops\_S1R1_NH* is saved. The filename of this file must end in "individuals.txt".

***  
<h4 class="text-primary">parallelnh_xx</h4>  

**Parameter** | **Description**
------------|---------------------------------------------------------------  
*folder.data*| A file path to the folder in which the *NewHybrids* formatted files to be analyzed, and their associated individual file reside.
*where.NH* | A file path to the *NewHybrids* installation folder. NOTE: The name of this folder must be named "newhybrids". If it is named anything else the function will fail.
*burnin* | An integer specifying how many burnin steps *NewHybrids* is to run
*sweeps* | An integer specifying how many sweep steps *NewHybrids* is to run  

```r
### Run analyses on all NewHybrids format files in the folder "your_data_to_analyze"
parallelnh_OSX(folder.data = "~/ ... /your_data_to_analyze/", where.NH = "~/ ... /newhybrids/", burnin = 5000, sweeps = 10000)
## the usage would be the same for the WIN and LINUX versions.

### ANALYSIS OF EXAMPLE DATA

## To download the example file


```

***  

### Important Notes:

* The folder in which *NewHybrids* resides must be named "newhybrids". If it is named anything else, the function will fail.  
* All file paths must end in "/". If they do not, the function may fail. As well, it is preferable to place all folders such that the file path to them does not contain spaces.  
* The first time the function is run, it may trigger warnings from the operating system, this is normal. Further, the function may not work properly in newer versions of Windows unless R is run as Administrator.  

***

### **parallelnewhybrid** Contributors

* Brendan Wringe <https://github.com/bwringe>; bwringe(at)gmail.com; Corresponding author  
* Dr. Ian Bradbury <http://tinyurl.com/h3qrhkv>  
* Dr. Nick Jeffery <https://github.com/NickJeff13>  
* Dr. Ryan Ronald Edward Stanley <https://github.com/rystanley> 

* If you don't understand anything, please contact me (bwringe[at]gmail.com)
* Any ideas on how to improve the functionality are very much appreciated.
* If you spot a typo, feel free to edit and send a pull request.  

To cite the current version of **parallelnewhybrid**, please refer to our zenodo DOI: 

***
***